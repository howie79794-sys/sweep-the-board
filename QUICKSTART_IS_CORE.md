# èµ„äº§åˆ†çº§åŠŸèƒ½å¿«é€Ÿå¼€å§‹

## ä¸€é”®éƒ¨ç½²ï¼ˆ5åˆ†é’Ÿæå®šï¼‰

### ç¬¬ä¸€æ­¥ï¼šå¤‡ä»½æ•°æ®ï¼ˆ30ç§’ï¼‰

```bash
cp data/yqt.db data/yqt.db.backup
```

### ç¬¬äºŒæ­¥ï¼šæ‰§è¡Œæ•°æ®åº“è¿ç§»ï¼ˆ1åˆ†é’Ÿï¼‰

```bash
# æ·»åŠ  is_core å­—æ®µ
sqlite3 data/yqt.db < backend/database/migrations/001_add_is_core.sql
```

### ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œæ•°æ®è¿ç§»ï¼ˆ2åˆ†é’Ÿï¼‰

```bash
# è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆå¦‚æœå°šæœªè®¾ç½®ï¼‰
export DATABASE_URL='sqlite:///data/yqt.db'

# æ‰§è¡Œè¿ç§»è„šæœ¬
cd backend
python scripts/migrate_is_core.py
```

æç¤ºæ—¶è¾“å…¥ `yes` ç¡®è®¤ã€‚

### ç¬¬å››æ­¥ï¼šéªŒè¯ç»“æœï¼ˆ30ç§’ï¼‰

```bash
# æ£€æŸ¥æ¯ä¸ªç”¨æˆ·çš„æ ¸å¿ƒèµ„äº§æ•°é‡ï¼ˆåº”è¯¥éƒ½æ˜¯ 1ï¼‰
sqlite3 data/yqt.db "SELECT user_id, COUNT(*) as core_count FROM assets WHERE is_core = 1 GROUP BY user_id;"
```

### ç¬¬äº”æ­¥ï¼šé‡å¯æœåŠ¡ï¼ˆ1åˆ†é’Ÿï¼‰

```bash
# é‡å¯åç«¯
cd backend
./start_backend.sh

# é‡å¯å‰ç«¯
cd frontend
npm run dev
```

### ç¬¬å…­æ­¥ï¼šéªŒè¯åŠŸèƒ½ï¼ˆ1åˆ†é’Ÿï¼‰

1. è®¿é—® http://localhost:3000/admin
2. æŸ¥çœ‹èµ„äº§åˆ—è¡¨ï¼Œåº”è¯¥çœ‹åˆ°"æ ¸å¿ƒ"å¾½ç«  âœ¨
3. ç¼–è¾‘ä»»æ„èµ„äº§ï¼Œåº”è¯¥çœ‹åˆ°"è®¾ç½®ä¸ºæ ¸å¿ƒèµ„äº§"å¤é€‰æ¡† âœ…

## å®Œæˆï¼ğŸ‰

ç°åœ¨ä½ å¯ä»¥ï¼š
- åœ¨èµ„äº§å¡ç‰‡ä¸Šçœ‹åˆ°é†’ç›®çš„"æ ¸å¿ƒ"å¾½ç« 
- åœ¨ç®¡ç†ç•Œé¢ç¼–è¾‘èµ„äº§çš„æ ¸å¿ƒçŠ¶æ€
- æ¯ä¸ªç”¨æˆ·åªèƒ½æœ‰ä¸€ä¸ªæ ¸å¿ƒèµ„äº§ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ ¡éªŒ

## é‡åˆ°é—®é¢˜ï¼Ÿ

æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£ï¼š
- [è¿ç§»æŒ‡å—](./MIGRATION_IS_CORE.md) - å®Œæ•´çš„è¿ç§»æ­¥éª¤å’Œæ•…éšœæ’é™¤
- [å®æ–½æ€»ç»“](./IMPLEMENTATION_SUMMARY_IS_CORE.md) - æŠ€æœ¯ç»†èŠ‚å’Œæ–‡ä»¶æ¸…å•

## å¿«é€Ÿæµ‹è¯•

```bash
# æµ‹è¯• API
curl http://localhost:8000/assets | jq '.[] | {name, is_core}'

# é¢„æœŸè¾“å‡ºï¼šæ‰€æœ‰èµ„äº§éƒ½æœ‰ is_core å­—æ®µ
```

## å›æ»šï¼ˆå¦‚æœéœ€è¦ï¼‰

```bash
# æ¢å¤å¤‡ä»½
cp data/yqt.db.backup data/yqt.db

# é‡å¯æœåŠ¡
cd backend && ./start_backend.sh
```
